define(["app","mui","vue"],function(c,b,f){c.showWaiting(1);var e=document.querySelector(".pop-backdrop"),g=document.querySelector(".pop-backdrop div");new f({el:"body",data:{ui:{app:document.getElementById("pr"),show:function(){this.app.classList.remove("mui-hidden")}},par:{eType:2,pageSize:5,lastDate:"",lastEId:""},o:{Banners:[]},isUp:!0,list:[]},methods:{close:function(){e&&e.classList.add("mui-hidden")},load:function(){var a=this;c.post("api/Events/GetEvents",a.par,function(d){""==a.par.lastEId&&(a.up=d.UID,a.o.Banners=d.Banners);a.par.lastEId=d.lastEId;a.par.lastDate=d.lastDate;a.list=a.list.concat(d.Items);b("#pr").pullRefresh().endPullupToRefresh(-1==a.par.lastEId);c.closeWaiting(1);a.ui.show()},function(){b("#pr").pullRefresh().endPullupToRefresh(!1);c.closeWaiting(1)})}},created:function(){},ready:function(){var a=this;b.init({pullRefresh:{container:"#pr",up:{contentrefresh:"\u6b63\u5728\u52a0\u8f7d...",contentnomore:"\u5df2\u52a0\u8f7d\u5168\u90e8",callback:function(){a.par.idx=a.lower;a.load()}}}});b.os.plus?b.plusReady(function(){setTimeout(function(){b("#pr").pullRefresh().pullupLoading()},1E3)}):b.ready(function(){b("#pr").pullRefresh().pullupLoading()});b.ready(function(){setTimeout(function(){b("#sliderBanner").slider({interval:5E3})},2E3);var a=b.preload({url:"detail.html",id:"wactivity_detail",styles:{popGesture:"hide"}});b("#ulList").on("tap","li",function(){var f={eventId:this.dataset.id};switch(this.dataset.clicktype){case "1":b.os.plus&&(b.fire(a,"reload",{ref:{id:this.dataset.id,index:0,title:this.dataset.title}}),a.show("pop-in"));break;case "2":c.post("api/Events/GetEventDes",f,function(a){g.innerHTML=a.Content;e&&e.classList.remove("mui-hidden")})}})})}})});