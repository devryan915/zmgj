define(["app","mui","vue"],function(d,b,e){new e({el:"#pr",data:{par:{erId:"",pageIndex:0,pageSize:8},isUp:!0,pageCount:0,list:[],o:{SelfRank:0},ui:{content:document.querySelector(".mui-content"),show:function(){this.content.classList.remove("mui-hidden")},hide:function(){this.content.classList.add("mui-hidden");b("#pr").pullRefresh().refresh(!0);this.list=[]}}},methods:{load:function(){var a=this;d.post("api/Events/GetRankInfo",a.par,function(c){a.pageCount=c.Total;1==a.par.pageIndex&&(a.o.SelfRank=c.SelfRank);a.isUp?a.list=a.list.concat(c.Items):(a.list=c.Items,b("#pr").pullRefresh().refresh(!0),b("#pr").pullRefresh().endPulldownToRefresh());b("#pr").pullRefresh().endPullupToRefresh(a.par.pageIndex>=a.pageCount);a.ui.show();d.closeWaiting()},function(){b("#pr").pullRefresh().endPulldownToRefresh();b("#pr").pullRefresh().endPullupToRefresh(!1)})}},created:function(){var a=this;b.init({pullRefresh:{container:"#pr",up:{contentrefresh:"\u6b63\u5728\u52a0\u8f7d...",contentnomore:"\u5df2\u52a0\u8f7d\u5168\u90e8",callback:function(){a.par.pageIndex++;a.load()}}},beforeback:function(){a.hide();return!0}})},ready:function(){var a=this;b.ready(function(){a.par.pageIndex=0;b("#pr").pullRefresh().pullupLoading()});b.plusReady(function(){window.addEventListener("reload",function(c){d.showWaiting(1);a.par.erId=c.detail.id;a.par.pageIndex=0;b("#pr").pullRefresh().pullupLoading()});plus.webview.currentWebview().addEventListener("popGesture",function(b){b.type="end";a.ui.hide()},!1)})}})});