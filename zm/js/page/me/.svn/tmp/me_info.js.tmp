define("app mui vue mui.view jquery jquery.qrcode".split(" "),function(a,d,m,p,n,q){d.init({});var h;new m({el:"#app",data:{user:a.User.get(),user1:a.User.get(),par:{loginName:"",validCode:"",password:""},validCodeStr:"\u83b7\u53d6\u9a8c\u8bc1\u7801",m:60,remember:!0,isSendValidCode:!0,editPasswordPar:{passwordOld:"",password:""},canEditSex:1,ver:3!=a.appType?a.appType+"-"+a.version:a.version},computed:{valid:function(){return{loginName:!!this.par.loginName,password:a.reg.password.test(this.par.password),validCode:!!this.par.validCode,remember:!!this.remember}},validCode:function(){return{isValidCode:!!this.par&&!!this.par.loginName&&this.isSendValidCode}},validPassword:function(){return{isPassword:!!this.editPasswordPar&&!!this.editPasswordPar.passwordOld&&a.reg.password.test(this.editPasswordPar.password)}},isValid:function(){var b=this.valid;return Object.keys(b).every(function(a){return b[a]})}},methods:{agreeement:function(){a.Cache.set(a.Cache.key.cpageUrl.toKeyName(),"http://chorse-sports.com/home_zm/serviceagreement.html");a.Cache.set(a.Cache.key.cpageTitle.toKeyName(),"\u5929\u9a6c\u7528\u6237\u670d\u52a1\u534f\u8bae");d.openWindow({url:"../pub/other.html",id:"wpact",createNew:!0,show:{aniShow:"pop-in",duration:300},waiting:{autoShow:!0}})},disclaimer:function(){a.Cache.set(a.Cache.key.cpageUrl.toKeyName(),"http://chorse-sports.com/home_zm/disclaimer.html");a.Cache.set(a.Cache.key.cpageTitle.toKeyName(),"\u8d5b\u4e8b\u514d\u8d23\u58f0\u660e");d.openWindow({url:"../pub/other.html",id:"wpact",createNew:!0,show:{aniShow:"pop-in",duration:300},waiting:{autoShow:!0}})},editSex:function(b){var e=this;if(1==e.canEditSex){var c={val:b.detail.isActive?1:0,infoType:3};a.post("api/User/UpdateUserBase",c,function(b){e.user.Sex=c.val;a.User.set(e.user);d.toast("\u4fee\u6539\u6210\u529f")},function(){e.canEditSex=0;setTimeout(function(){d("#sexSwitch")["switch"]().toggle();var b=document.getElementById("sexSwitch"),a=document.querySelector(".mui-switch-handle");"1"==c.val?a.style.webkitTransform="translate(43px, 0)":a.style.webkitTransform="translate(0, 0)";"1"==c.val?b.classList.add("mui-active"):b.classList.remove("mui-active");setTimeout(function(){e.canEditSex=1},500)},500)})}},sendValidCode:function(){var b=this;b.isSendValidCode=!1;b.validCodeStr=b.m+"s \u540e\u91cd\u65b0\u83b7\u53d6";h=setInterval(function(){1<b.m?(--b.m,b.validCodeStr=b.m+"s \u540e\u91cd\u65b0\u83b7\u53d6"):(b.isSendValidCode=!0,clearTimeout(h),b.validCodeStr="\u83b7\u53d6\u9a8c\u8bc1\u7801",b.m=60)},1E3);a.post("api/user/GetVerifyCode",{mobileNum:b.par.loginName,vcType:2},function(b){d.toast("\u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f")},function(){b.isSendValidCode=!0;clearTimeout(h);b.validCodeStr="\u83b7\u53d6\u9a8c\u8bc1\u7801";b.m=60})},editMobile:function(){var b=this;a.showWaiting();var e={val:b.par.loginName,infoType:5,pwd:b.par.password,validCode:b.par.validCode};a.post("api/User/UpdateUserBase",e,function(c){b.user.MobileNum=e.val;a.User.set(b.user);b.par=null;a.closeWaiting();d.toast("\u4fee\u6539\u6210\u529f");d.os.plus&&d.fire(plus.webview.currentWebview().opener(),"reload",{type:"userInfo"});d.back()},function(){a.closeWaiting()})},editPassword:function(){var b=this;a.showWaiting();a.post("api/User/ChangePwd",b.editPasswordPar,function(e){b.editPasswordPar=null;a.closeWaiting();d.toast("\u4fee\u6539\u6210\u529f");d.back()},function(){a.closeWaiting()})},exit:function(){d.confirm("\u662f\u5426\u786e\u5b9a\u9000\u51fa\u5f53\u524d\u8d26\u53f7","\x26nbsp;",["\u53d6\u6d88","\u786e\u5b9a"],function(b){1==b.index&&(a.User.clear(),d.openWindow({id:"wlogin",url:"../login/login.html",show:{aniShow:"slide-in-right"},waiting:{autoShow:!1}}),a.Cache.set("gotab",!1),d.os.plus&&d.fire(plus.webview.getLaunchWebview(),"gotab",{type:"userInfo",id:"windex"}),d.os.plus&&plus.webview.hide("wme_info_setting","none"))},"div")},clearCache:function(){a.Cache.ideleteAll(function(){d.toast("\u6e05\u7406\u7f13\u5b58\u6210\u529f")})},getHeadClip:function(){return plus.webview.getWebviewById("whead")||d.preload({url:"head.html",id:"whead",styles:{popGesture:"hide"}})},galleryImg:function(b){plus.gallery.pick(function(a){d.openWindow({id:"whead",url:"head.html",extras:{headUrl:a,img:b.imageID,viewID:"wme_info_meInfo",sizeParam:b.sizeParam},show:{autoShow:!0,aniShow:"slide-in-right"},waiting:{autoShow:!1}})},function(b){},{filter:"image"})},getImage:function(b){plus.camera.getCamera().captureImage(function(a){plus.io.resolveLocalFileSystemURL(a,function(a){d.openWindow({id:"whead",url:"head.html",extras:{headUrl:a.toLocalURL(),img:b.imageID,viewID:"wme_info_meInfo",sizeParam:b.sizeParam},show:{autoShow:!0,aniShow:"slide-in-right"},waiting:{autoShow:!1}})},function(b){})},function(b){},{})},selImg:function(b){var a=this,c=[],f=[];"headPhoto"==b?(c=[260,260],f=[300,300]):(c=[260,195],f=[300,225]);var g={imageID:b,sizeParam:{size:c,outputSize:f}};d.os.plus&&plus.nativeUI.actionSheet({title:"\u4fee\u6539\u5934\u50cf",cancel:"\u53d6\u6d88",buttons:[{title:"\u62cd\u7167"},{title:"\u4ece\u624b\u673a\u76f8\u518c\u9009\u62e9"}]},function(b){switch(b.index){case 1:a.getImage(g);break;case 2:a.galleryImg(g)}})},initImgPreview:function(){var b=this,a=document.querySelectorAll(".head-img-left img");if((a=d.slice.call(a))&&0<a.length){var c=document.createElement("div");c.setAttribute("id","__mui-imageview__");c.classList.add("mui-slider");c.classList.add("mui-fullscreen");c.style.display="none";c.addEventListener("tap",function(){c.style.display="none"});c.addEventListener("touchmove",function(b){b.preventDefault()});var f=document.createElement("div");f.setAttribute("id","__mui-imageview__group");f.classList.add("mui-slider-group");a.forEach(function(a,d,e){a.addEventListener("tap",function(){c.style.display="block";g.refresh();g.gotoItem(d,0)});a=document.createElement("div");a.classList.add("mui-slider-item");e=document.createElement("a");var k=document.createElement("img");k.setAttribute("id","aHeadImgView");k.setAttribute("src",b.user.ImgUrl);e.appendChild(k);a.appendChild(e);f.appendChild(a)});c.appendChild(f);document.body.appendChild(c);var g=d(c).slider()}}},created:function(){},ready:function(){var b=this;d.ready(function(){a.loadImg();var e=location.href,c=e.lastIndexOf("#");"#pageMeQRcode"==e.substring(c,e.length)&&n("#qrWo").qrcode({render:"canvas",width:205,height:205,background:"#efeff4",text:a.toUtf8(b.user.QRCode)});var e=-1==c?"#meInfo":e.substring(c,e.length),f=d("#app").view({defaultPage:e});d(".mui-scroll-wrapper").scroll();d(".me-head").on("tap","i",function(){b.selImg(this.id)});var g=f.view;(function(a){var d=a.back;a.back=function(){f.canBack()?(b.isSendValidCode=!0,h&&clearTimeout(h),b.par=null,b.validCodeStr="\u83b7\u53d6\u9a8c\u8bc1\u7801",b.m=60,f.back()):d()};g.addEventListener("pageBeforeShow",function(b){});g.addEventListener("pageShow",function(b){});g.addEventListener("pageBeforeBack",function(b){});g.addEventListener("pageBack",function(b){})})(d);d(".mui-navbar-inner").on("tap","button.save",function(){a.showWaiting();var e=this.dataset.form,c={infoType:this.dataset.type},f,g,h=!0,l="input";"frmPersonSign"==e&&(l="textarea");d("#"+e+" "+l).each(function(b,a){f=c.val=a.value;g=a.dataset.name;if(a.dataset.reg&&!(new RegExp(a.dataset.reg)).test(a.value))return d.toast(a.dataset.regError),h=!1});h||a.closeWaiting();h&&a.post("api/User/UpdateUserBase",c,function(e){b.user[g]=f;"4"==c.infoType&&b.user.Sex!=e&&(b.canEditSex=0,setTimeout(function(){d("#sexSwitch")["switch"]().toggle();var c=document.getElementById("sexSwitch"),f=document.querySelector(".mui-switch-handle");"1"==e?f.style.webkitTransform="translate(43px, 0)":f.style.webkitTransform="translate(0, 0)";"1"==e?c.classList.add("mui-active"):c.classList.remove("mui-active");setTimeout(function(){b.user.Sex=e;a.User.set(b.user);b.canEditSex=1},500)},500));a.User.set(b.user1);a.closeWaiting();d.toast("\u4fee\u6539\u6210\u529f");d.os.plus&&d.fire(plus.webview.currentWebview().opener(),"reload",{type:"userInfo"});d.back()},function(){a.closeWaiting()})})});d.plusReady(function(){window.addEventListener("reload",function(d){b.ver=a.version});window.addEventListener("uploadHead",function(e){var c;"userHead"==e.detail.img?c=0:"userPhoto1"==e.detail.img?c=1:"userPhoto2"==e.detail.img&&(c=2);a.showWaiting();a.post("api/User/UpdateUserHeader",{val:e.detail.headData,place:c},function(c){console.log("\u4fee\u6539\u5934\u50cf\u6210\u529f\uff1a"+e.detail.img+" "+c);"userHead"==e.detail.img?(b.user.ImgUrl=c,b.user.ImgUrls[0].ImgUrl=c):"userPhoto1"==e.detail.img?b.user.ImgUrls[1].ImgUrl=c:"userPhoto2"==e.detail.img&&(b.user.ImgUrls[2].ImgUrl=c);a.loadImg();a.User.set(b.user);a.closeWaiting();d.os.plus&&d.fire(plus.webview.currentWebview().opener(),"reload",{type:"photo"});d.toast("\u4fee\u6539\u6210\u529f")},function(){console.log("\u4fee\u6539\u5931\u8d25\uff0c\u5c1d\u8bd5\u4eceGetFirstPage\u83b7\u53d6\u6570\u636e");a.post("api/News/GetFirstPage",{lastDT:""},function(c){c=c.UserInfo;"userHead"==e.detail.img?(b.user.ImgUrl=c.ImgUrl,b.user.ImgUrls[0].ImgUrl=c.ImgUrls[0].ImgUrl):"userPhoto1"==e.detail.img?b.user.ImgUrls[1].ImgUrl=c.ImgUrls[1].ImgUrl:"userPhoto2"==e.detail.img&&(b.user.ImgUrls[2].ImgUrl=c.ImgUrls[2].ImgUrl);a.User.set(b.user);a.loadImg();d.os.plus&&d.fire(plus.webview.currentWebview().opener(),"reload",{type:"photo"});d.toast("\u4fee\u6539\u6210\u529f")});a.closeWaiting()})})})}})});