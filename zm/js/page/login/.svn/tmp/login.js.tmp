define(["app","mui","vue"],function(b,c,h){new h({el:"#app",data:{par:{loginName:"",password:"",sn:""},auths:[],show:!1},computed:{isValid:function(){return!!this.par.loginName&&!!this.par.password}},methods:{login:function(){b.showWaiting();if(c.os.plus){var d=plus.push.getClientInfo();this.par.other={push:{clientid:d.clientid,token:d.token},device:plus.device,screen:plus.screen,os:plus.os};this.par.other=JSON.stringify(this.par.other)}b.post(b.method.user_login,this.par,function(a){b.User.set(a);b.hideKeyboard();a=b.Cache.getBoolean("gotab")?"gotab":"reload";c.fire(plus.webview.getLaunchWebview(),a,{type:"userInfo"});c.fire(plus.webview.getWebviewById("wdynamic_list"),"reload",{});b.closeWaiting();var f=plus.webview.currentWebview();f.hide("none");setTimeout(function(){f.close()},5E3)},function(){b.closeWaiting()})},register:function(){c.openWindow({id:"wregister",url:"register.html",show:{aniShow:"slide-in-right"},waiting:{autoShow:!1},styles:{popGesture:"hide"}})},forget_password:function(){c.openWindow({id:"wforget_password",url:"forget_password.html",show:{aniShow:"slide-in-right"},waiting:{autoShow:!1},styles:{popGesture:"hide"}})}},ready:function(){var d=this;c.plusReady(function(){plus.webview.currentWebview().addEventListener("popGesture",function(a){a.type="end";b.hideKeyboard()},!1);plus.oauth.getServices(function(a){var c=["weixin","qq"],g;for(g in a){var e=a[g];~c.indexOf(e.id)&&b.isInstalled(e.id)&&d.auths.push(e)}});c("#divOauth").on("tap","a",function(){var a=d.auths[this.dataset.index];a.logout(function(){a.login(function(){a.getUserInfo(function(){c.toast("\u767b\u5f55\u6388\u6743\u6210\u529f");b.log("\u6388\u6743\u4fe1\u606f:::"+JSON.stringify(a.authResult));b.log("\u7528\u6237\u4fe1\u606f:::"+JSON.stringify(a.userInfo))},function(a){b.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff1a"+a.message)})})},function(){})})})}})});