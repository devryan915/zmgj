define(["app","mui","vue","load"],function(c,d,r,t){c.showWaiting(1);var h=0,e,n=!0,p=!0,q=document.getElementById("pkg1");q&&q.classList.remove("mui-hidden");new r({el:"#app",data:{urlStr:"",pageID:"",defImg:"http://chorse-sports.ufile.ucloud.com.cn/sys/defaul_bg_16_9.png",spAni:null,pageType:3,corpsID:"",user:c.User.get(),repar:{projectId:"",rosterId:""},atPar:{userID:""},o:{},parSupport:{projectId:"",rid:"",rType:0,payPwd:"",isPayPwd:""},pageData:{recevieMB:0,totalcount:10,itemdata1:{idx:0,NickName:"",groupName:"",personSign:"",Imgs:[""],points:300,SNum:0,ChapterName:"",RealName:"",FeeNum:0,SelfReward:0},itemdata2:{idx:0,NickName:"",groupName:"",personSign:"",Imgs:[""],points:300,SNum:0,ChapterName:"",RealName:"",FeeNum:0,SelfReward:0},itemdata3:{idx:0,NickName:"",groupName:"",personSign:"",Imgs:[""],points:300,SNum:0,ChapterName:"",RealName:"",FeeNum:0,SelfReward:0},direction:""}},computed:{},methods:{slide:function(b){var a=this,f=a.pageData.direction;h=b.detail.slideNumber;var g,l,m,k;p=!1;0==h?(l=a.pageData.itemdata3,g=a.pageData.itemdata1,m=a.pageData.itemdata2,e=d("#slider1").slider(),e.refresh()):1==h?(l=a.pageData.itemdata1,g=a.pageData.itemdata2,m=a.pageData.itemdata3,e=d("#slider2").slider(),e.refresh()):2==h&&(l=a.pageData.itemdata2,g=a.pageData.itemdata3,m=a.pageData.itemdata1,e=d("#slider3").slider(),e.refresh());n=g.hasMoreImg;if("right"===f){l.Imgs=[a.defImg];if(!g.LastID)return;b=a.getReqPar(g.LastID);k=0<=h-1?h-1:2}else{m.Imgs=[a.defImg];k=(h+1)%3;if(!g.NextID)return;b=a.getReqPar(g.NextID)}g.Imgs&&0<g.Imgs.length?document.querySelector(".blur").dataset.img=g.Imgs[0]:document.querySelector(".blur").dataset.img=a.defImg;c.loadImg();c.post(a.urlStr,b,function(b){0==k?(a.pageData.itemdata1=b,a.pageData.itemdata1.hasMoreImg=a.pageData.itemdata1.Imgs&&1<a.pageData.itemdata1.Imgs.length,a.pageData.itemdata1.Imgs&&0<a.pageData.itemdata1.Imgs.length||(a.pageData.itemdata1.Imgs=[a.defImg]),b=d("#slider1").slider(),b.refresh(),!a.pageData.itemdata1.hasMoreImg&&b.gotoItem(0),a.pageData.itemdata1.groupName=a.pageData.itemdata1.ChapterName):1==k?(a.pageData.itemdata2=b,a.pageData.itemdata2.hasMoreImg=a.pageData.itemdata2.Imgs&&1<a.pageData.itemdata2.Imgs.length,a.pageData.itemdata2.Imgs&&0<a.pageData.itemdata2.Imgs.length||(a.pageData.itemdata2.Imgs=[a.defImg]),b=d("#slider2").slider(),b.refresh(),!a.pageData.itemdata2.hasMoreImg&&b.gotoItem(0),a.pageData.itemdata2.groupName=a.pageData.itemdata2.ChapterName):2==k&&(a.pageData.itemdata3=b,a.pageData.itemdata3.hasMoreImg=a.pageData.itemdata3.Imgs&&1<a.pageData.itemdata3.Imgs.length,a.pageData.itemdata3.Imgs&&0<a.pageData.itemdata3.Imgs.length||(a.pageData.itemdata3.Imgs=[a.defImg]),b=d("#slider3").slider(),b.refresh(),!a.pageData.itemdata3.hasMoreImg&&b.gotoItem(0),a.pageData.itemdata3.groupName=a.pageData.itemdata3.ChapterName);c.loadImg()})},drag:function(b){this.pageData.direction=b.detail.direction},getReqPar:function(b){var a;2==this.pageType?a={userID:b,corpsId:this.corpsID}:1==this.pageType?a={userID:b}:3==this.pageType&&(a={rosterId:b,projectId:this.parSupport.projectId,rType:this.parSupport.rType,isDown:1});return a},autoSlide:function(){setInterval(function(){e&&n&&(p?e.nextItem():setTimeout(function(){p=!0},1E3))},3E3)},playAnimationed:function(){var b=document.querySelectorAll(".support-animated");if(b)for(var a=0;a<b.length;a++){var f=b[a];f.dataset.id==this.parSupport.rid&&function(a){a.classList.add("pulse");setTimeout(function(){a.classList.remove("pulse")},500)}(f)}},load:function(b){var a=this,f=a.getReqPar(b);a.autoSlide();f.isDown="0";c.post(a.urlStr,f,function(b){a.pageData.itemdata1=b;a.pageData.itemdata1.hasMoreImg=a.pageData.itemdata1.Imgs&&1<a.pageData.itemdata1.Imgs.length;a.pageData.itemdata1.Imgs&&0<a.pageData.itemdata1.Imgs.length||(a.pageData.itemdata1.Imgs=[a.defImg]);n=a.pageData.itemdata1.hasMoreImg;c.loadImg();t.show();b=d("#slider").slider();b.refresh();b.gotoItem(0);e=d("#slider1").slider();e.refresh();e.gotoItem(0);c.closeWaiting();c.post(a.urlStr,a.getReqPar(a.pageData.itemdata1.NextID),function(b){a.pageData.itemdata2=b;a.pageData.itemdata2.hasMoreImg=a.pageData.itemdata2.Imgs&&1<a.pageData.itemdata2.Imgs.length;a.pageData.itemdata2.Imgs&&0<a.pageData.itemdata2.Imgs.length||(a.pageData.itemdata2.Imgs=[a.defImg]);c.loadImg()});c.post(a.urlStr,a.getReqPar(a.pageData.itemdata1.LastID),function(b){a.pageData.itemdata3=b;a.pageData.itemdata3.hasMoreImg=a.pageData.itemdata3.Imgs&&1<a.pageData.itemdata3.Imgs.length;a.pageData.itemdata3.Imgs&&0<a.pageData.itemdata3.Imgs.length||(a.pageData.itemdata3.Imgs=[a.defImg]);c.loadImg()})},function(){c.showError(function(){c.showWaiting(1);a.load(b)});c.closeWaiting()})},created:function(){},close:function(){document.querySelector(".riderinfo-backdrop").style.display="none"},reReward:function(){var b=this;c.showWaiting();c.post("api/User/ReceiveReward",b.repar,function(a){switch(b.pageID){case "1":b.pageData.itemdata1.SelfReward=0;break;case "2":b.pageData.itemdata2.SelfReward=0;break;case "3":b.pageData.itemdata3.SelfReward=0}var f=c.User.get();f.MB+=a;c.User.set(f);d.os.plus&&d.fire(plus.webview.getWebviewById("windex2"),"reload",{type:"mb"});b.pageData.recevieMB=a;document.querySelector(".riderinfo-backdrop").style.display="block";c.closeWaiting()},function(){c.closeWaiting()})},support:function(){var b=this;c.showWaiting();c.post("api/Events/Support",b.parSupport,function(a){switch(b.pageID){case "1":b.pageData.itemdata1.SNum++;b.pageData.itemdata1.NowSupportNum++;b.pageData.itemdata1.SupportNum++;break;case "2":b.pageData.itemdata2.SNum++;b.pageData.itemdata2.NowSupportNum++;b.pageData.itemdata2.SupportNum++;break;case "3":b.pageData.itemdata3.SNum++,b.pageData.itemdata3.NowSupportNum++,b.pageData.itemdata3.SupportNum++}b.o.nsn>=b.o.freeNum&&(a=c.User.get(),a.MB-=b.o.feeNum,""!=b.parSupport.isPayPwd.toString()&&(a.IsPayPwd=b.parSupport.isPayPwd),c.User.set(a),d.os.plus&&d.fire(plus.webview.getLaunchWebview(),"reload",{type:"userInfo"}));b.o.nsn++;c.closeWaiting();b.playAnimationed()},function(){c.closeWaiting()})}},ready:function(){var b=this;document.querySelector(".mui-slider").addEventListener("slide",function(a){b.slide(a)});var a=c.User.get();a.IsPayPwd=!0;c.User.set(a);d.ready(function(){d(".rider-title").on("tap",".rider-receive",function(){b.pageID=this.dataset.pageid;b.repar.rosterId=this.dataset.id;b.reReward()});d(".rider-title").on("tap",".rider-handsp",function(){b.parSupport.rid=this.dataset.id;b.pageID=this.dataset.pageid;b.o.feeNum=this.dataset.feenum;b.o.freeNum=this.dataset.freenum;b.o.nsn=this.dataset.nsn;b.o.nsn>=b.o.freeNum&&c.User.get().IsPayPwd?d.confirm('\t\x3cdiv\x3e\x3cinput type\x3d"password" id\x3d"payPwd" placeholder\x3d"\u8bf7\u8f93\u5165\u767b\u5f55\u5bc6\u7801" class\x3d"mui-input-password" /\x3e\x3clabel for\x3d"isPayPwd"\x3e\x3cinput id\x3d"isPayPwd" checked\x3d"checked" type\x3d"checkbox" /\x3e\u4e0d\u518d\u63d0\u9192\x3c/label\x3e\x3c/div\x3e',"\u9700\u652f\u4ed8 "+b.o.feeNum+" \u9a6c\u5e01",["\u53d6\u6d88","\u786e\u8ba4\u652f\u4ed8"],function(a){1==a.index&&(b.parSupport.payPwd=document.getElementById("payPwd").value,b.parSupport.isPayPwd=!document.getElementById("isPayPwd").checked,b.support())},"div"):b.support()});window.addEventListener("riderID",function(a){a.detail.riderID&&(b.pageType=selfPage.pageType,b.corpsID=a.detail.corpsID,1==b.pageType?b.urlStr="api/Events/GetRiderDtl":2==b.pageType?b.urlStr="api/Events/GetCorpsRiderDtl":3==b.pageType&&(b.urlStr="api/Events/GetRosterInfo",b.parSupport.projectId=a.detail.pid,b.parSupport.rType=a.detail.rtype,b.o.nsn=a.detail.nsn,b.o.freeNum=a.detail.freeNum,b.o.feeNum=a.detail.feeNum,b.repar.projectId=a.detail.pid),b.load(a.detail.riderID))})});d.plusReady(function(){var a=plus.webview.currentWebview();a&&a.riderID&&(b.pageType=a.pageType,b.corpsID=a.corpsID,1==b.pageType?b.urlStr="api/Events/GetRiderDtl":2==b.pageType?b.urlStr="api/Events/GetCorpsRiderDtl":3==b.pageType&&(b.urlStr="api/Events/GetRosterInfo",b.parSupport.projectId=a.pid,b.parSupport.rType=a.rtype,b.o.nsn=a.nsn,b.o.freeNum=a.freeNum,b.o.feeNum=a.feeNum,b.repar.projectId=a.pid),b.load(a.riderID))})}})});