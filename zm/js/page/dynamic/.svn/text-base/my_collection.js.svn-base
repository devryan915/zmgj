define(["app","mui","vue","mui.previewimage","mui.zoom"],function(e,b,g,h,k){new g({el:"#app",data:{user:e.User.get(),par:{pageIndex:0,pageSize:5},isUp:!0,pageCount:0,list:[]},computed:{},methods:{load:function(){var a=this;a.user=e.User.get();e.post("api/Posting/GetMyCollection",a.par,function(c){a.pageCount=c.Pages;a.isUp?a.list=a.list.concat(c.Items):(a.list=c.Items,b("#pr").pullRefresh().refresh(!0));e.loadImg();e.closeWaiting();b("#pr").pullRefresh().endPullupToRefresh(a.par.pageIndex>=a.pageCount);e.ellipsisToggle()},function(){e.closeWaiting();b("#pr").pullRefresh().endPullupToRefresh(!1)})}},ready:function(){var a=this;b.init({pullRefresh:{container:"#pr",up:{contentrefresh:"\u6b63\u5728\u52a0\u8f7d...",contentnomore:"\u5df2\u52a0\u8f7d\u5168\u90e8",callback:function(){a.par.pageIndex++;a.load()}}}});b.ready(function(){b.previewImage();b.os.plus||b("#pr").pullRefresh().pullupLoading();b(".y-card-list").on("tap",".y-attention",function(){var c=this,a="true"==c.dataset.isattention;e.post(a?"api/Posting/DeleteFocusUser":"api/Posting/AddFocusUser",{userID:c.dataset.userid},function(b){c.innerText=a?"+ \u5173\u6ce8":"\u53d6\u6d88\u5173\u6ce8";c.dataset.isattention=(!a).toString()})});b(".y-card-list").on("tap",".mui-card-footer\x3ea[data-type]",function(){var c=this,b=c.parentNode,f={postId:b.dataset.id,clickType:c.dataset.type};switch(parseInt(c.dataset.type)){case 1:e.post("api/Posting/ClickLike",f,function(d){d=c.querySelector("i");d.classList.remove("y-collect-o");d.classList.add("y-collect");d.classList.add("y-yellow");a.list[b.dataset.index].CNums++;c.dataset.type=5});break;case 2:e.post("api/Posting/ClickLike",f,function(d){d=c.querySelector("i");d.classList.remove("y-heart-o");d.classList.add("y-heart");d.classList.add("y-red");a.list[b.dataset.index].PNums++;c.dataset.type=9});break;case 5:e.post("api/Posting/ClickLike",f,function(d){d=c.querySelector("i");d.classList.add("y-collect-o");d.classList.remove("y-collect");d.classList.remove("y-yellow");a.list[b.dataset.index].CNums--;c.dataset.type=1});break;case 100:e.share({href:"http://chorse-sports.com/home_zm/app.html",title:"\u8981\u9a91\u9a6c\uff0c\u9009\u5929\u9a6c\u3002",content:"\u6211\u6b63\u5728\u4f7f\u7528\u5929\u9a6c\uff0c\u8d76\u5feb\u548c\u6211\u4e00\u8d77\u6765\u4f7f\u7528\u5427\u3002",thumbs:["http://chorse-sports.ufile.ucloud.com.cn/sys/logo_100x100.png"]});break;case 101:e.openWin("../dynamic/review.html","wdynamic_review",{id:f.postId},function(a){},{popGesture:"close"})}})});b.plusReady(function(){window.addEventListener("reload",function(c){a.par.pageIndex=0;setTimeout(function(){b("#pr").pullRefresh().pullupLoading()},1E3)});window.addEventListener("unload",function(c){a.list=[];b("#pr").pullRefresh().refresh(!0)});plus.webview.currentWebview().ref&&setTimeout(function(){b("#pr").pullRefresh().pullupLoading()},1E3)})}})});