define(["app","mui","vue"],function(c,d,g){new g({el:"#app",data:{par:{tradeNo:"",payType:""},payChannel:{},orderInfo:{},m:5},computed:{isValid:function(){return!!this.par.payType}},methods:{pay:function(){var a=this,b=a.payChannel[a.par.payType];b.serviceReady?(c.showWaiting(),c.post("api/User/GetTradeSignInfo",a.par,function(e){plus.payment.request(b,e.RequestPara,function(){var b={tradeNo:a.par.tradeNo},e=setInterval(function(){1<a.m?(--a.m,c.post("api/User/GetTradeResult",b,function(a){if(a.IsSuccess){c.closeWaiting();clearTimeout(e);a=c.User.get();var b=c.Cache.getObject(c.Cache.key.choosedClub.toKeyName());a.ChapterID=b.id;a.ChapterName=b.name;c.User.set(a);d.fire(plus.webview.getLaunchWebview(),"reload",{type:"userInfo"});d.alert('\x3ci class\x3d"y y-finish y-green y-7x"\x3e\x3c/i\x3e\x3cp\x3e\u652f\u4ed8\u6210\u529f\x3c/p\x3e',"\x26nbsp;","\u8fd4\u56de\u9996\u9875",function(){plus.webview.hide("wequestrian_about","none");plus.webview.hide("wequestrian_add","none");plus.webview.hide("wequestrian_add_sure","none");plus.webview.hide("wequestrian_add_pay","zoom-fade-in");plus.webview.close("wequestrian_about");plus.webview.close("wequestrian_add");plus.webview.close("wequestrian_add_sure");plus.webview.close("wequestrian_add_pay")},"div")}})):(clearTimeout(e),a.m=5,c.closeWaiting(),a.payStatusRetry())},2E3)},function(a){c.closeWaiting();c.log("\u652f\u4ed8\u5931\u8d25::"+JSON.stringify(a))})},function(){c.closeWaiting()})):plus.nativeUI.confirm("\u7cfb\u7edf\u6ca1\u6709\u5b89\u88c5\u201c"+b.description+"\u201d\u670d\u52a1\uff0c\u662f\u5426\u7acb\u5373\u5b89\u88c5",function(a){a.index||b.installService()},b.description)},payStatusRetry:function(){var a=this;d.confirm("\u652f\u4ed8\u672a\u5b8c\u6210\uff0c\u652f\u4ed8\u9047\u5230\u95ee\u9898","\x26nbsp;",["\u91cd\u65b0\u652f\u4ed8","\u652f\u4ed8\u5b8c\u6210"],function(b){1==b.index&&(c.showWaiting(),c.post("api/User/GetTradeResult",{tradeNo:a.par.tradeNo},function(b){c.closeWaiting();if(b.IsSuccess){b=c.User.get();var f=c.Cache.getObject(c.Cache.key.choosedClub.toKeyName());b.ChapterID=f.id;b.ChapterName=f.name;c.User.set(b);d.fire(plus.webview.getLaunchWebview(),"reload",{type:"userInfo"});d.alert('\x3ci class\x3d"y y-finish y-green y-7x"\x3e\x3c/i\x3e\x3cp\x3e\u652f\u4ed8\u6210\u529f\x3c/p\x3e',"\x26nbsp;","\u8fd4\u56de\u9996\u9875",function(){plus.webview.hide("wequestrian_about","none");plus.webview.hide("wequestrian_add","none");plus.webview.hide("wequestrian_add_sure","none");plus.webview.hide("wequestrian_add_pay","zoom-fade-in");plus.webview.close("wequestrian_about");plus.webview.close("wequestrian_add");plus.webview.close("wequestrian_add_sure");plus.webview.close("wequestrian_add_pay")},"div")}else a.payStatusRetry()},function(){c.closeWaiting()}))},"div")}},ready:function(){var a=this;d.init();d.plusReady(function(){window.addEventListener("reload",function(b){a.par.tradeNo=b.detail.orderNo;a.orderInfo.totalMoney=b.detail.totalMoney});plus.payment.getChannels(function(b){for(var c in b)a.payChannel[b[c].id]=b[c]},function(){c.log("\u83b7\u53d6\u652f\u4ed8\u901a\u9053\u5931\u8d25")})})}})});