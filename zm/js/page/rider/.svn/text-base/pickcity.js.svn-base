define(["app","mui","vue","mui.indexedlist"],function(d,e,f){new f({el:"#app",data:{par:{search:""},curcity:"\u6b63\u5728\u5b9a\u4f4d",idxlist:void 0,citylistel:void 0,datalist:void 0,hotList:[]},computed:{},methods:{load:function(){var a=this;d.showWaiting(1);d.post("api/Common/GetStaticCity",{},function(b){a.datalist=b;a.hotList=a.datalist.HotItems;a.datalist.Items.forEach(function(c){var a=document.createElement("li");a.dataset.group=c.indextitle;a.classList.add("mui-table-view-divider");a.classList.add("mui-indexed-list-group");a.innerText=c.indextitle;citylist.appendChild(a);c.children.forEach(function(a){var c=document.createElement("li");c.dataset.value=a.value;c.dataset.tags=a.value;c.dataset.code=a.code;c.dataset.name=a.name;c.classList.add("mui-table-view-cell");c.classList.add("mui-indexed-list-item");c.innerText=a.name;citylist.appendChild(c)})});a.idxlist=e("#list").indexedList({});d.closeWaiting()},function(){d.closeWaiting();a.datalist||d.showError(function(){d.showWaiting(1);a.load()},1)})},locate:function(){var a=this;a.curProvince="\u6b63\u5728\u5b9a\u4f4d...";plus.geolocation.getCurrentPosition(function(b){a.curcity=b.address.city;console.log(b.address);for(var c in b.address)console.log(c+" ");console.log(b.coordsType+" "+b.address.province+" "+b.coords.longitude+" "+b.coords.accuracy+" "+b.timestamp);d.pageLoaded()},function(b){a.curProvince="\u5b9a\u4f4d\u5931\u8d25("+b.message+")"},{provider:"baidu"})}},ready:function(){var a=this;a.load();e.ready(function(){a.citylistel=document.getElementById("citylist");var b=document.getElementById("list");b.style.height=document.body.offsetHeight-b.offsetTop+"px";document.getElementById("cityinput").addEventListener("input",function(){a.idxlist.search(this.value)},!1);e("#frmSearch").on("tap",".mui-icon-clear",function(){a.idxlist.search("")},!1);e("#hotcity").on("tap","li",function(a){a=plus.webview.currentWebview();d.openPage(a.ref.parentPageURL,a.ref.parentPageID,{city:this.dataset.id})});e(".mui-content").on("tap","#curcity",function(a){a=plus.webview.currentWebview();d.openPage(a.ref.parentPageURL,a.ref.parentPageID,{city:this.dataset.id})});e("#hotcity").on("tap","li",function(a){a=plus.webview.currentWebview();d.openPage(a.ref.parentPageURL,a.ref.parentPageID,{city:this.dataset.id})});e(".mui-indexed-list-inner").on("tap","li[data-value]",function(a){a=plus.webview.currentWebview();d.openPage(a.ref.parentPageURL,a.ref.parentPageID,{city:this.dataset.code})})});e.plusReady(function(){window.addEventListener("reload",function(b){a.idxlist||a.load();a.locate()});a.locate()})}})});