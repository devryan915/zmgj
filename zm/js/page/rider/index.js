define(["app","mui","vue"],function(d,c,e){new e({el:"#app",data:{curcity:"",par:{lat:"",city:"",strCon:"",lng:"",pageIndex:"1",pageSize:"99999"},firstLoad:"0",lstatus:"0",idxlist:[]},computed:{},methods:{detail:function(a){var b=plus.webview.getWebviewById("wnews_detail");a=a.dataset.data?JSON.parse(a.dataset.data):{};b?(c.fire(b,"reload",{ref:a}),b.show("slide-in-right")):(b=c.preload({url:"../news/detail.html",id:"wnews_detail",styles:{popGesture:"hide"},extras:{ref:a}}),b.show("slide-in-right"),b.addEventListener("hide",function(){c.fire(b,"unload",{})}))},load:function(){var a=this;"1"==a.lstatus&&d.post("api/Ride/GetFirstPage",a.par,function(b){a.idxlist=b.Clubs.Items;d.loadImg();d.closeWaiting()},function(){d.closeWaiting();a.idxlist||d.showError(function(){d.showWaiting(1,1);a.load()},1)})},pickcity:function(){d.openPage("../rider/pickcity.html","rider_pickcity",{},function(a){})},locate:function(){var a=this;a.lstatus="0";a.curProvince="\u6b63\u5728\u5b9a\u4f4d...";plus.geolocation.getCurrentPosition(function(b){a.par.lat=b.coords.latitude;a.par.city=b.address.city;a.par.lng=b.coords.longitude;a.curcity=b.address.city;a.lstatus="1";a.load();"0"==a.firstLoad&&(a.firstLoad=1)},function(b){a.curProvince="\u5b9a\u4f4d\u5931\u8d25("+b.message+")";a.pickcity()},{provider:"baidu"})}},ready:function(){var a=this;c.ready(function(){var b=c.os.ios?.003:9E-4;c(".mui-scroll-wrapper").scroll({bounce:!1,indicators:!0,deceleration:b});c(".mui-bar-tab").on("tap",".mui-tab-item",function(){"4"==this.dataset.type?d.fExpect():d.openPage("../rider/list.html","rider_list",{lat:a.par.lat,city:a.par.city,lng:a.par.lng,rideType:this.dataset.type})});c(".mui-content").on("tap",".mem-item",function(){a.detail(this)})});c.plusReady(function(){window.addEventListener("reload",function(b){"rider_pickcity"==b.detail.ref.parentPageID?(a.par.lat=void 0,a.par.city=b.detail.ref.city,a.par.lng=void 0,a.curcity=b.detail.ref.city,a.lstatus="1",d.showWaiting(1,1),a.load()):"0"==a.lstatus&&a.locate()});var b=c.back;c.back=function(){plus.webview.currentWebview().canBack(function(a){console.log(a.canBack)});console.log(c.hooks.backs[1].name);b()};window.addEventListener("unload",function(a){plus.webview.currentWebview().canBack(function(a){})});a.locate();d.pageLoaded()})}})});